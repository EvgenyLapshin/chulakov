var kupavnaProduct=function(){var n=function(){var n=$("#related-slider");n.slick({slidesToShow:3,slidesToScroll:3,variableWidth:!0,infinite:!1,appendArrows:$("#related-slider-control"),prevArrow:'<svg class="icon-arrow slick-prev"><use xlink:href="#icon-arrow"></use></svg>',nextArrow:'<svg class="icon-arrow slick-next transform-180"><use xlink:href="#icon-arrow"></use></svg>',mobileFirst:!1}),n.find(".name").dotdotdot()};return{init:function(){n();var t=$("#buy-form-packages"),o=$("#buy-form-total").find("span").eq(0),a=function(n){n.remove(),c()},r=function(n,t){n.trigger("package.change",{$package:n,newCount:t})},c=function(){var n=0;t.find(".pre-packing-product").each(function(){var t=$(this),o=Number(t.find(".count input").val()),a=t.data("product");t.find(".total span").html(window.cart.formatPrice(a.price*a.count)),t.data("product",a),n+=a.price*o}),o.html(cart.formatPrice(n))};t.on("package.change",function(n,t){n.stopPropagation(),n.preventDefault();var o=t.$package,a=o.find(".count input"),r=o.data("product");r.count=t.newCount,a.val(r.count),c()}).on("change keyup",".count input",function(){var n=$(this).closest(".pre-packing-product"),t=Number($(this).val());t=Math.min(t,999),r(n,t)}).on("click",".count .up",function(n){n.stopPropagation();var t=$(this).closest(".pre-packing-product"),o=t.find(".count input"),a=Number(o.val());a++,a=Math.min(a,999),o.val(a),r(t,a)}).on("click",".count .down",function(n){n.stopPropagation();var t=$(this).closest(".pre-packing-product"),o=t.find(".count input"),c=Number(o.val());c>0?(c--,o.val(c),r(t,c)):a(t)}).on("click",".remove",function(n){n.preventDefault(),n.stopPropagation(),a($(this).closest(".pre-packing-product"))}).closest(".reveal").on("click",".buy-form-actions button",function(n){n.preventDefault(),t.find(".pre-packing-product").each(function(){var n=$(this),t=Number(n.find(".count input").val());t>0&&cart.add(n.data("product"),t)}),t.closest(".reveal").foundation("close")})}}}();$(document).ready(function(){kupavnaProduct.init()});