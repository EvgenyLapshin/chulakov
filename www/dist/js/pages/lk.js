var kupavnaLK=function(){var e=function(){var e=$("#new-doc-lk");$("#new-doc-lk_file",e).on("change",function(){$("#new-doc-lk_file-name",e).val(this.files[0].name),e.find(".check").removeClass("hide")}),e.find("#new-doc-lk_browse").on("click",function(){$("#new-doc-lk_file",e).trigger("click")})},i=function(){var e=$(".more-write"),i=e.find(".items span");$("#profile-update-form").on("change","input",function(){var t=$(this),a=e.find('.decor[href="#'+t.attr("id")+'"]').closest("span");""==t.val()?a.fadeIn(0):a.fadeOut(0);var n=i.filter(":visible");i.filter(".last").removeClass("last"),n.length?(e.removeClass("hidden"),n.eq(-1).addClass("last")):e.addClass("hidden")})},t=function(){$(".lk-history-item").on("click",".toggle",function(){var e=$(this).closest(".lk-history-item");e.hasClass("is-open")?(e.removeClass("is-open"),e.find(".wrap").css("height",0),$(this).find("span").text("Развернуть")):(e.addClass("is-open"),e.find(".wrap").css("height",e.find(".inner").height()),$(this).find("span").text("Свернуть"))})},a=function(){var e=window.location.hash;""!=e?($('[href = "'+e+'" ]').attr("aria-selected",!0).closest("li").addClass("is-active"),$(e).addClass("is-active")):($('[href = "#panel1" ]').attr("aria-selected",!0).closest("li").addClass("is-active"),$("#panel1").addClass("is-active"))},n=function(){$("body").on("click",".repeat-order",function(){Cookies.remove("cart",{path:"/"}),cart.init();var e=$(this).closest(".lk-history-item").find(".item"),i=!0;e.each(function(e,t){var a=$(t).data("product");if(a){var n,o=a.in_stock?a.in_stock:1e6;n=i?a.count:a.count>o?o:a.count,cart.add(a,n)}}),window.location.href="/lk/cart"})},o=function(){$("body").on("click",".lk-doc-item .close",function(){var e=$(this).closest(".lk-doc-item"),i=$(".lk-doc-wrapper");i.find(".callout").remove(),$.ajax({url:"/lk/profile/deleteFile?id="+e.data("id"),data:"",dataType:"JSON",method:"POST"}).success(function(i){0==i.error_code&&e.animate({opacity:0},500,function(){setTimeout(function(){e.remove()},200)})}).error(function(){i.append('<div class="callout warning" style="margin-top: 18px"><h5>Произошла ошибка.</h5><p>Повторите попытку позднее. В случае повторения ошибки свяжитесь с <a href="mailto:info@reaktivy.ru">администрацией</a></p></div>')}).complete(function(){})})},c=function(){var e=$(".js--unitsModeRadio"),i=$(".header").data("units-mode");e.each(function(){var e=$(this);e.attr("value")==i&&e.prop("checked",!0)})};return{init:function(){e(),t(),i(),a(),o(),n(),c(),kupavnaApp.anchorToBlock()}}}();$(document).ready(function(){kupavnaLK.init()});